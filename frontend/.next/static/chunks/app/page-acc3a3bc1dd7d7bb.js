(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5997:function(e,t,a){Promise.resolve().then(a.bind(a,434))},434:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var n=a(7437),s=a(5588),l=a(1290),r=a(2265),i=a(257);function u(){let{user:e}=(0,s.aF)(),{getToken:t}=(0,s.aC)(),[a,u]=(0,r.useState)(""),[c,d]=(0,r.useState)(null),[o,m]=(0,r.useState)(""),[p,x]=(0,r.useState)(!1),[f,h]=(0,r.useState)(""),b=async n=>{n.preventDefault(),x(!0),h("");try{let n=await t(),s=new FormData;s.append("name",(null==e?void 0:e.fullName)||(null==e?void 0:e.username)||""),s.append("text",a),c&&s.append("audio",c);let l=await fetch(i.env.NEXT_PUBLIC_API_URL+"/submit",{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:s});if(!l.ok)throw Error("Submission failed");let r=await l.json();m(r.summary)}catch(e){h(e.message)}x(!1)};return e?(0,n.jsxs)("div",{className:"max-w-lg mx-auto p-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"RemoteSync Standup"}),(0,n.jsx)(s.l8,{afterSignOutUrl:"/"})]}),(0,n.jsxs)("form",{onSubmit:b,className:"space-y-3",children:[(0,n.jsx)("textarea",{className:"w-full border p-2",placeholder:"Type your update...",value:a,onChange:e=>u(e.target.value)}),(0,n.jsx)("input",{type:"file",accept:"audio/*",onChange:e=>d(e.target.files[0])}),(0,n.jsx)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",type:"submit",disabled:p,children:p?"Submitting...":"Submit"})]}),f&&(0,n.jsx)("div",{className:"text-red-500 mt-2",children:f}),o&&(0,n.jsxs)("div",{className:"mt-4 p-2 border bg-gray-50",children:[(0,n.jsx)("h2",{className:"font-bold",children:"Summary:"}),(0,n.jsx)("pre",{children:o})]})]}):(0,n.jsxs)("div",{className:"max-w-lg mx-auto p-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"RemoteSync Standup"}),(0,n.jsx)(l.SignIn,{afterSignInUrl:"/",afterSignUpUrl:"/"}),(0,n.jsx)(l.SignUp,{afterSignInUrl:"/",afterSignUpUrl:"/"})]})}}},function(e){e.O(0,[911,971,117,744],function(){return e(e.s=5997)}),_N_E=e.O()}]);